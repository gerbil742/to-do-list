<!DOCTYPE html>
<html>
  <head> 
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body>
    <h1>Add New Todo</h1> 
    <button class='addToDoButton' onclick="location.href='http://localhost:3000/homepage.html';">Back</button>
    <!-- <form id='newToDoForm' action='/todos' method="post" > -->
    <form id='newToDoForm' >
      <label for="description" title= "This field is required">Task:</label><br>
      <input type="text" id="description" name="description" required maxlength="100"><br>

      <label for="dueDate">Due By:</label><br>
      <input type="date" id="dueDate" name="dueDate"><br>
      <br>
      <input class='addToDoButton' type='submit' value='Create Todo'>
    </form>
  </body>
</html>

<script src="javascript/httpRequests.js"></script>

<script type="text/javascript">
  function createFormDataEvent(event) {
    event.preventDefault();

    new FormData(document.getElementById("newToDoForm")); // fires the formdata event
  }

  function alertOnSubmit(event) {
    try {
      let formData = event.formData;
      let postData = {}
        
        for (var key of formData.keys()) {
          postData[key] = formData.get(key);
      }

      createToDo(postData);
      alert("New Todo Added!");
    } catch (err) {
      alert("There was an error. Try again later.")
    }
  }
  
  document.getElementById("newToDoForm").addEventListener('submit', createFormDataEvent);
  document.getElementById("newToDoForm").addEventListener('formdata', alertOnSubmit);
</script>
